# Flask æ¡†æ¶

> å¿«é€Ÿéƒ¨ç½²å’Œä½“éªŒServerlessæ¶æ„ä¸‹çš„Flaské¡¹ç›®

- [ä½“éªŒå‰å‡†å¤‡](#ä½“éªŒå‰å‡†å¤‡)
- [ä»£ç ä¸é¢„è§ˆ](#ä»£ç ä¸é¢„è§ˆ)
- [å¿«é€Ÿéƒ¨ç½²å’Œä½“éªŒ](#å¿«é€Ÿéƒ¨ç½²å’Œä½“éªŒ)
    - [åœ¨çº¿å¿«é€Ÿä½“éªŒ](#åœ¨çº¿å¿«é€Ÿä½“éªŒ)
    - [åœ¨æœ¬åœ°éƒ¨ç½²ä½“éªŒ](#åœ¨æœ¬åœ°éƒ¨ç½²ä½“éªŒ)
- [é¡¹ç›®ä½¿ç”¨æ³¨æ„äº‹é¡¹](#é¡¹ç›®ä½¿ç”¨æ³¨æ„äº‹é¡¹)
- [åº”ç”¨è¯¦æƒ…](#åº”ç”¨è¯¦æƒ…)

## ä½“éªŒå‰å‡†å¤‡

è¯¥åº”ç”¨æ¡ˆä¾‹ï¼Œéœ€è¦æ‚¨å¼€é€š[é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—](https://fcnext.console.aliyun.com/) äº§å“ï¼›å¹¶å»ºè®®æ‚¨å½“å‰çš„è´¦å·æœ‰ä¸€ä¸‹æƒé™å­˜åœ¨`FCDefaultRole`ã€‚

## ä»£ç ä¸é¢„è§ˆ

- [:octocat: æºä»£ç ](https://github.com/devsapp/start-web-framework/tree/master/web-framework/python/flask/src)
- [:earth_africa: æ•ˆæœé¢„è§ˆ](http://flask.web-framework.1583208943291465.cn-shenzhen.fc.devsapp.net/)

## å¿«é€Ÿéƒ¨ç½²å’Œä½“éªŒ
### åœ¨çº¿å¿«é€Ÿä½“éªŒ

- é€šè¿‡é˜¿é‡Œäº‘ **Serverless åº”ç”¨ä¸­å¿ƒ**ï¼š å¯ä»¥ç‚¹å‡» [ã€ğŸš€ éƒ¨ç½²ã€‘](https://fcnext.console.aliyun.com/applications/create?template=start-flask) ï¼ŒæŒ‰ç…§å¼•å¯¼å¡«å…¥å‚æ•°ï¼Œå¿«é€Ÿè¿›è¡Œéƒ¨ç½²å’Œä½“éªŒã€‚

### åœ¨æœ¬åœ°éƒ¨ç½²ä½“éªŒ

1. ä¸‹è½½å®‰è£… Serverless Devsï¼š`npm install @serverless-devs/s` 
    > è¯¦ç»†æ–‡æ¡£å¯ä»¥å‚è€ƒ [Serverless Devs å®‰è£…æ–‡æ¡£](https://github.com/Serverless-Devs/Serverless-Devs/blob/master/docs/zh/install.md)
2. é…ç½®å¯†é’¥ä¿¡æ¯ï¼š`s config add`
    > è¯¦ç»†æ–‡æ¡£å¯ä»¥å‚è€ƒ [é˜¿é‡Œäº‘å¯†é’¥é…ç½®æ–‡æ¡£](https://github.com/devsapp/fc/blob/main/docs/zh/config.md)
3. åˆå§‹åŒ–é¡¹ç›®ï¼š`s init start-flask -d start-flask`
4. è¿›å…¥é¡¹ç›®å¹¶éƒ¨ç½²ï¼š`cd start-flask && s deploy`

> åœ¨æœ¬åœ°ä½¿ç”¨è¯¥é¡¹ç›®æ—¶ï¼Œä¸ä»…å¯ä»¥éƒ¨ç½²ï¼Œè¿˜å¯ä»¥è¿›è¡Œæ›´å¤šçš„æ“ä½œï¼Œä¾‹å¦‚æŸ¥çœ‹æ—¥å¿—ï¼ŒæŸ¥çœ‹æŒ‡æ ‡ï¼Œè¿›è¡Œå¤šç§æ¨¡å¼çš„è°ƒè¯•ç­‰ï¼Œè¿™äº›æ“ä½œè¯¦æƒ…å¯ä»¥å‚è€ƒ[å‡½æ•°è®¡ç®—ç»„ä»¶å‘½ä»¤æ–‡æ¡£](https://github.com/devsapp/fc#%E6%96%87%E6%A1%A3%E7%9B%B8%E5%85%B3) ;

## é¡¹ç›®ä½¿ç”¨æ³¨æ„äº‹é¡¹

1. é¡¹ç›®Yamlä¸­ï¼Œå£°æ˜äº†`actions`ï¼Œå…¶å¯¹åº”çš„å‘½ä»¤ä¸º`pip3 install -r requirements.txt -t .`ï¼Œå¦‚æœåœ¨ä½¿ç”¨é¡¹ç›®æ—¶ï¼Œé‡åˆ°ç±»ä¼¼æ‰¾ä¸åˆ°`python`å‘½ä»¤ã€`pip`å‘½ä»¤çš„æƒ…å†µï¼Œè¯·æ ¹æ®è‡ªèº«ç”µè„‘å…³äº`python`ä¸`pip`çš„é…ç½®å¯¹æ­¤å‡ºè¿›è¡Œä¿®æ”¹ï¼Œæˆ–è€…æ‰‹åŠ¨è¿›è¡Œä¾èµ–å®‰è£…ï¼Œå¹¶æ³¨é‡Šæ‰è¿™`actions`éƒ¨åˆ†ä»£ç ï¼›
2. ç›®å‰å‡½æ•°è®¡ç®—æ”¯æŒçš„é¡¹ç›®ä»£ç åŒ…å¤§å°ä¸º100Mï¼Œå¦‚æœä¸€ä¸ªå®Œæ•´çš„Djangoé¡¹ç›®ä¾èµ–åŒ…è¿‡å¤§ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹æ³•è¿›è¡Œä¼˜åŒ–å’Œå¤„ç†ï¼š
    - å°†éƒ¨åˆ†é™æ€èµ„æºç­‰ï¼Œæ”¾åœ¨å¯¹è±¡å­˜å‚¨ä¸­ï¼Œä»¥é™ä½ä»£ç åŒ…çš„ä½“ç§¯ï¼›
    - å°† `nasConfig` é…ç½®ä¸º `auto`ï¼Œç„¶ååŸºäº nas æŒ‡ä»¤å°†å¤§æ–‡ä»¶ï¼ˆå¯èƒ½æ˜¯è®­ç»ƒé›†/ä¾èµ–åŒ…ï¼‰ä¼ è¾“åˆ° NAS æŒ‡å®šä½ç½®ï¼Œç„¶åé…ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡åˆ° `s.yml` ä¸­çš„å‡½æ•°é…ç½®ä¸­ï¼›
    - å°†é custom-container çš„å‡½æ•°è½¬æ¢æˆ custom-containerï¼Œè¿™éœ€è¦å¯¹ä»£ç è¿›è¡Œä¸€å®šçš„æ”¹é€ ï¼Œå¹¶æ–°å¢ dockerfileï¼Œç„¶ååˆ›å»ºè¿™ä¸ªå‡½æ•°ï¼ˆæ­¤æ–¹å¼å†·å¯åŠ¨æ—¶é—´ç›¸å¯¹å…¶ä»– runtime ä¼šæœ‰ä¸€ç‚¹ç‚¹çš„å»¶é•¿ï¼‰ï¼›
3. é€šè¿‡custom-containerè¿è¡Œæ—¶ï¼Œå°†Djangoæ¡†æ¶éƒ¨ç½²åˆ°Serverlessæ¶æ„ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æµç¨‹è¿›è¡Œæ“ä½œå’Œå¤„ç†ï¼š
    - å¼€é€šé˜¿é‡Œäº‘[å®¹å™¨é•œåƒæœåŠ¡](https://cr.console.aliyun.com/), å¹¶åˆ›å»ºå¯¹åº”çš„é•œåƒä»“åº“ï¼Œè®¾ç½®å¯†é’¥ï¼›
    - åœ¨é¡¹ç›®ä¸­`s.container.yaml`ä¸­ï¼Œä¿®æ”¹43è¡Œçš„`image`å‚æ•°ä¸ºè‡ªå·±çš„å®¹å™¨é•œåƒæœåŠ¡å¯¹åº”çš„é•œåƒä»“åº“åœ°å€ï¼›
    - åœ¨é¡¹ç›®ä¸­æ‰§è¡Œ`s build --use-docker -t s.container.yaml`è¿›è¡Œé¡¹ç›®çš„æ„å»ºï¼›
    - æ„å»ºå®Œæˆä¹‹åæ‰§è¡Œ`s deploy -y`è¿›è¡Œé¡¹ç›®çš„éƒ¨ç½²;

## åº”ç”¨è¯¦æƒ…

æœ¬é¡¹ç›®æ˜¯å°† Python Web æ¡†æ¶ä¸­ï¼Œéå¸¸å—æ¬¢è¿çš„ Flask æ¡†æ¶ï¼Œéƒ¨ç½²åˆ°é˜¿é‡Œäº‘ Serverless å¹³å°ï¼ˆå‡½æ•°è®¡ç®— FCï¼‰ã€‚

> Flaskæ˜¯ä¸€ä¸ªä½¿ç”¨ Python ç¼–å†™çš„è½»é‡çº§ Web åº”ç”¨æ¡†æ¶ã€‚å…¶ WSGI å·¥å…·ç®±é‡‡ç”¨ Werkzeug ï¼Œæ¨¡æ¿å¼•æ“åˆ™ä½¿ç”¨ Jinja2 ã€‚Flaskä½¿ç”¨ BSD æˆæƒã€‚

é€šè¿‡ Serverless Devs å¼€å‘è€…å·¥å…·ï¼Œæ‚¨åªéœ€è¦å‡ æ­¥ï¼Œå°±å¯ä»¥ä½“éªŒ Serverless æ¶æ„ï¼Œå¸¦æ¥çš„é™æœ¬ææ•ˆçš„æŠ€æœ¯çº¢åˆ©ã€‚

æœ¬æ¡ˆä¾‹åº”ç”¨æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ Hello World æ¡ˆä¾‹ï¼Œéƒ¨ç½²å®Œæˆä¹‹åï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ç³»ç»Ÿè¿”å›ç»™æ‚¨çš„æ¡ˆä¾‹åœ°å€ï¼Œä¾‹å¦‚ï¼š

![å›¾ç‰‡alt](https://serverless-article-picture.oss-cn-hangzhou.aliyuncs.com/1644567788251_20220211082308412077.png)

æ­¤æ—¶ï¼Œæ‰“å¼€æ¡ˆä¾‹åœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°æµ‹è¯•çš„åº”ç”¨è¯¦æƒ…ï¼š

![å›¾ç‰‡alt](https://serverless-article-picture.oss-cn-hangzhou.aliyuncs.com/1644567807662_20220211082327817140.png)

-----

> - Serverless Devs é¡¹ç›®ï¼šhttps://www.github.com/serverless-devs/serverless-devs   
> - Serverless Devs æ–‡æ¡£ï¼šhttps://www.github.com/serverless-devs/docs   
> - Serverless Devs é’‰é’‰äº¤æµç¾¤ï¼š33947367    